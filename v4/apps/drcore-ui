{
  "captainVersion": 4,
  "services": {
    "$$cap_appname": {
      "image": "ghcr.io/zakegit/drcore:$$cap_drcore_version",
      "volumes": [
        "$$cap_appname-data:/usr/src/app/src/assets/data",
        "$$cap_appname-uploads:/usr/src/app/public/uploads"
      ],
      "restart": "always",
      "environment": {
        "NODE_ENV": "production",
        "PORT": "3001",
        "HOST": "0.0.0.0",
        "INSTANCE_NAME": "$$cap_fabrika_adi",
        "INTERNAL_API_BASE_URL": "$$cap_api_url",
        "FRONTEND_ORIGIN": "*",
        "NEXBUS_FETCH_TIMEOUT_MS": "$$cap_nexbus_timeout",
        "UPLOAD_PROVIDER": "$$cap_upload_provider",
        "GITHUB_TOKEN": "$$cap_github_token",
        "GITHUB_REPO": "$$cap_github_repo"
      },
      "caproverExtra": {
        "containerHttpPort": "3001"
      }
    }
  },
  "caproverOneClickApp": {
    "variables": [
      {
        "id": "$$cap_drcore_version",
        "label": "DR Core Versiyon",
        "defaultValue": "latest",
        "description": "GHCR image versiyonu (latest veya 1.10.7 gibi)",
        "validRegex": "/^([^\\s^\\/])+$/"
      },
      {
        "id": "$$cap_fabrika_adi",
        "label": "Fabrika Adi",
        "defaultValue": "",
        "description": "Fabrika kisa adi (kucuk harf, orn escon, akgida, hamidiye). Bu ad INSTANCE_NAME ve CDN klasoru olarak kullanilir.",
        "validRegex": "/^[a-z0-9-]+$/"
      },
      {
        "id": "$$cap_api_url",
        "label": "NexBus API URL",
        "defaultValue": "http://10.1.0.3:5000/api",
        "description": "Bu fabrikaya ait NexBus API adresi. Her fabrika icin FARKLI port/adres olmali."
      },
      {
        "id": "$$cap_nexbus_timeout",
        "label": "NexBus Timeout (ms)",
        "defaultValue": "8000",
        "description": "NexBus API istek zaman asimi (milisaniye)"
      },
      {
        "id": "$$cap_upload_provider",
        "label": "Upload Provider",
        "defaultValue": "cdn",
        "description": "Gorsel yukleme yontemi cdn (Datacenter CDN) veya local (container ici). CDN onerilir.",
        "validRegex": "/^(cdn|local)$/"
      },
      {
        "id": "$$cap_github_token",
        "label": "GitHub Token",
        "defaultValue": "",
        "description": "GitHub Personal Access Token (backup icin). Bos birakilabilir, sonra ayarlardan da girilebilir."
      },
      {
        "id": "$$cap_github_repo",
        "label": "GitHub Backup Repo",
        "defaultValue": "",
        "description": "GitHub backup repo (ornek: zakeGit/fabrika-backup). Bos birakilabilir."
      }
    ],
    "instructions": {
      "start": "DR Core UI - Endustriyel SCADA Dashboard.\nFabrika adini girin, NexBus API URL ayarlayin, deploy edin.\nGitHub Token ve Repo alanlari opsiyoneldir - bos birakilirsa admin panelinden de girilebilir.\nPersistent volume otomatik olusturulur.",
      "end": "DR Core UI basariyla kuruldu!\nUygulama adresi: http://$$cap_appname.$$cap_root_domain\nINSTANCE_NAME: $$cap_fabrika_adi\n\nNot: HTTPS, HTTP yonlendirme ve WebSocket ayarlarini CapRover HTTP Ayarlari sekmesinden etkinlestirin."
    },
    "displayName": "DR Core UI",
    "isOfficial": true,
    "description": "DR Core UI - Endustriyel SCADA Dashboard. Her fabrika icin ayri deploy edin.",
    "documentation": "https://github.com/zakeGit/DR_CoreUI"
  }
}